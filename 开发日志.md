5.16:
## 数据库结构修改总结

在整个对话中，我对数据库结构进行了以下修改：

### 1. 用户表(users)增加字段
- **level**: INT类型，默认值1
  - 用于存储用户等级信息
  - 在抽卡系统中可用于解锁不同内容

- **gems**: INT类型，默认值1000
  - 主要充值货币/高级货币
  - 用于卡池抽卡(单抽消耗100，十连抽消耗950)
  - 可通过充值功能获得更多

- **coins**: INT类型，默认值500
  - 游戏内基础货币
  - 目前抽卡未使用，保留用于其他游戏功能

### 2. 创建迁移脚本
创建了一个SQL迁移脚本`add_resources_to_users.sql`，包含：
- ALTER TABLE语句为users表添加新字段
- UPDATE语句为现有用户设置默认资源值

### 3. 隐含的数据库表结构
虽然没有显式创建，但在代码中引用了以下数据库结构：

- **cards表**：存储卡牌基本信息
  - card_id: 卡牌ID
  - name: 卡牌名称
  - rarity: 稀有度(common, rare, epic, legendary)
  - description: 卡牌描述

- **user_cards表**：存储用户拥有的卡牌
  - user_id: 用户ID
  - card_id: 卡牌ID
  - quantity: 数量

这些修改使系统支持了用户资源管理、卡池抽卡和充值等功能，完成了游戏系统的基础数据结构设计。



5.21：

1、数据库模式细节改动：

- 将资源统一进用户表，用户表新增diamonds、coins字段，原resource相关表删除，通过外键关联到resource的表dungeon_rewards和payment_records修改。同时用户表增添等级level字段。
- 修复了原数据库设计中不同用户的相同卡牌会共用相同的技能数值的严重问题（card_skill_relation现在外键关联到user_card_id表而不是卡牌表），微调了卡牌相关表的属性与建表顺序。
- 细化了原数据库中的基础属性与额外技能，各自拆分为attack和defense两种数值。

2、增加了抽卡与养成相关功能的测试脚本example_cards.sql。其中包括：

- 用户表、卡池表、技能表、卡牌表添加相关简单示例。
- 模拟10连抽与抽卡记录、卡牌升级提升属性值、卡牌技能提升等功能。

因为脚本一直微调测试比较复杂，所以目前添加的示例都只有代号，没有具体的卡牌名技能名什么的，但是功能上应该已经基本完整。
